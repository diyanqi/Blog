---
layout: post
published: false
tags:
  - 学习
  - 交流
  - 网课
  - 破解
  - 抓包
  - 技术
title: 【仅学习交流用】破解某网课录屏限制
categories: [实验室, 实战]
image:
  path: https://tse3-mm.cn.bing.net/th/id/OIP-C.IvwSOqBTMKT2jJmHZvQ-lAHaEK
---

网课回放需要录屏，然而黑心的资本家做出了种种措施防止你录屏。或是弹出这样的提示：

![截屏2023-06-22 22.08.13.png](https://s2.loli.net/2023/06/22/g75FXiMWnhUoazV.png)

或是在页面上留下水印：

> （你的名字）

这样一来，我们就无法正常进行录屏了。下面给出的解决方法，仅供技术学习交流。

# 1. 初探抓包

没有任何思路，先抓包试试。发现在登录成功后，服务端会再次返回学员姓名和用户名。这很可能是水印的来源。

![image.png](https://s2.loli.net/2023/06/22/DOo6hGKwW5LsylE.png)

继续，进入课堂，打开视频。这一过程中收集到了很多请求。

首先是这个请求：

![截屏2023-06-23 07.44.28.png](https://s2.loli.net/2023/06/23/dXtLAy9PI2neGYR.png)

显而易见，这是服务端返回录屏软件列表，客户端根据该列表来判断录屏软件是否在运行。

剩下的还如这个：

![截屏2023-06-23 07.49.23.png](https://s2.loli.net/2023/06/23/yaNhZiG3Ho9Xqnw.png)

这大概是网课视频文件的一种格式，原理与矢量图差不多，能记录老师笔迹的位置。

# 2. 修改数据包

首先我们先来解决水印问题。在 `doLogin` 的请求上右键，找到本地映射。

![截屏2023-06-23 07.51.56.png](https://s2.loli.net/2023/06/23/nfhEVPNkLM5imRj.png)

然后直接把含有你姓名、用户名的部分全部删掉，留下一个空字符串。

![截屏2023-06-23 08.13.09.png](https://s2.loli.net/2023/06/23/TIgWPznSO1MtcQp.png)

> 这里的登陆由于具有时效性，建议修改前先正常登录一遍，获取最新的数据包再修改；否则会登陆无效。
{: .prompt-tip }

接着是录屏工具问题。直接找到 `antiScreenRecord` 的请求，右键、工具、黑名单，将其加入黑名单即可。

![截屏2023-06-23 08.15.56.png](https://s2.loli.net/2023/06/23/t1lQIfyRXw4J7EU.png)

# 3. 验证

进入程序，登陆成功后可以看到，名字已经为空了（见左下角）：

![截屏2023-06-23 08.34.08.png](https://s2.loli.net/2023/06/23/4nO7RDswkSqlbdp.png)

进入课堂回放，会弹出“网络连接失败”：

![截屏2023-06-23 08.35.26.png](https://s2.loli.net/2023/06/23/eqWIbzN2EYoS9yH.png)

不要担心，这是因为我们拦截了获取录屏列表的请求，所以提示网络连接失败。点击“确定”即可，不影响其他播放。

同时也能看到，水印已经没有了。打开 OBS 等录屏软件，也是安然无恙。

![截屏2023-06-23 08.36.58.png](https://s2.loli.net/2023/06/23/KuYyNHpO6oicZMf.png)

# 4. 补充

偶然发现一个上传日志的请求，建议屏蔽掉，否则容易使你的账号被封。

![截屏2023-06-23 08.38.21.png](https://s2.loli.net/2023/06/23/6xeYbu54rqntwcM.png)
